<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lesson 2 Interactive Worksheet</title>
  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --accent:#4CAF50;
      --muted:#6b6f76;
      --danger:#b30000;
      --pill:#eef7ee;
      --max-width:1000px;
    }

    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{background:var(--bg);color:#222;display:flex;justify-content:center;padding:24px;}
    .container{width:100%;max-width:var(--max-width);}

    h1{margin:0 0 18px;font-size:1.6rem;color:#222;}
    .question{
      background:var(--card);
      padding:18px;
      border-radius:12px;
      margin-bottom:18px;
      box-shadow:0 6px 18px rgba(20,24,30,0.06);
    }
    .question p{margin:8px 0;}
    .options label{display:block;margin:8px 0;padding:6px;border-radius:8px;cursor:pointer;}
    .options label:hover{background:#fafafa}
    input[type="radio"]{transform:scale(1.05);margin-right:10px;vertical-align:middle;}
    input[type="text"]{padding:8px;border-radius:8px;border:1px solid #ddd;width:260px;max-width:100%;}
    button{padding:10px 16px;background:var(--accent);color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;}
    button:hover{filter:brightness(.96)}
    .feedback{margin-left:10px;font-weight:700;}
    .correct{color:green;}
    .incorrect{color:var(--danger);}
    .feedback-list{margin-top:12px;padding-left:20px;}
    .feedback-list li{color:var(--danger);margin:6px 0;font-weight:600;}

    /* Word bank styling */
    .word-bank{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0 14px;}
    .word-pill{background:var(--pill);padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,0.04);font-weight:600;color:#164e2e;}

    /* Section score */
    .score{margin-top:10px;font-weight:700;color:var(--muted);}

    /* Responsive */
    @media (max-width:720px){
      h1{font-size:1.3rem;}
      .question{padding:14px;}
      input[type="text"]{width:100%;}
      button{width:100%;}
      .word-bank{gap:6px;}
    }
  </style>
</head>
<body>
  <main class="container">
    <h1>Lesson 2 — Interactive Worksheet</h1>

    <!-- SECTION 1 -->
    <section id="section1" class="question">
      <p><b>1. Choose the correct stressed syllable</b></p>

      <div class="options" data-word="ultra-processed">
        <p><i>ultra-processed</i></p>
        <label><input type="radio" name="q1" value="wrong"> ul - tra - pro - CESSED <span class="feedback"></span></label>
        <label><input type="radio" name="q1" value="correct" data-answer="ul - tra - PRO - cessed"> ul - tra - PRO - cessed <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="measures">
        <p><i>measures</i></p>
        <label><input type="radio" name="q2" value="correct" data-answer="MEA - sures"> MEA - sures <span class="feedback"></span></label>
        <label><input type="radio" name="q2" value="wrong"> mea - SURES <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="marketing">
        <p><i>marketing</i></p>
        <label><input type="radio" name="q3" value="wrong"> mar - ke - TING <span class="feedback"></span></label>
        <label><input type="radio" name="q3" value="correct" data-answer="MAR - ke - ting"> MAR - ke - ting <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="restriction">
        <p><i>restriction</i></p>
        <label><input type="radio" name="q4" value="correct" data-answer="re - STRIC - tion"> re - STRIC - tion <span class="feedback"></span></label>
        <label><input type="radio" name="q4" value="wrong"> RE - stric - tion <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="governments">
        <p><i>governments</i></p>
        <!-- corrected options with (n) and correct one flagged -->
        <label><input type="radio" name="q5" value="wrong"> gov - er(n) - MENTS <span class="feedback"></span></label>
        <label><input type="radio" name="q5" value="correct" data-answer="GOV - er(n) - ments"> GOV - er(n) - ments <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="subsidies">
        <p><i>subsidies</i></p>
        <label><input type="radio" name="q6" value="correct" data-answer="SUB - si - dies"> SUB - si - dies <span class="feedback"></span></label>
        <label><input type="radio" name="q6" value="wrong"> sub - SI - dies <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="packaging">
        <p><i>packaging</i></p>
        <label><input type="radio" name="q7" value="correct" data-answer="PACK - a - ging"> PACK - a - ging <span class="feedback"></span></label>
        <label><input type="radio" name="q7" value="wrong"> pack - a - GING <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="labelling">
        <p><i>labelling</i></p>
        <label><input type="radio" name="q8" value="wrong"> la - BELL - ing <span class="feedback"></span></label>
        <label><input type="radio" name="q8" value="correct" data-answer="LA - bell - ing"> LA - bell - ing <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="reformulation">
        <p><i>reformulation</i></p>
        <label><input type="radio" name="q9" value="wrong"> RE - for - mu - la - tion <span class="feedback"></span></label>
        <label><input type="radio" name="q9" value="correct" data-answer="re - for - mu - LA - tion"> re - for - mu - LA - tion <span class="feedback"></span></label>
      </div>

      <div style="margin-top:12px;">
        <button onclick="checkSection1()">Submit Section 1</button>
        <div id="score1" class="score" aria-live="polite"></div>
        <ul id="feedback1" class="feedback-list" aria-live="polite"></ul>
      </div>
    </section>

    <!-- SECTION 2 -->
    <section id="section2" class="question">
      <p><b>2. Fill in the blanks using: </b></p>
      <!-- visually striking word bank -->
      <div class="word-bank" aria-hidden="false">
        <span class="word-pill">ultra-processed</span>
        <span class="word-pill">measures</span>
        <span class="word-pill">marketing</span>
        <span class="word-pill">restriction</span>
        <span class="word-pill">governments</span>
        <span class="word-pill">subsidies</span>
        <span class="word-pill">packaging</span>
        <span class="word-pill">labelling</span>
        <span class="word-pill">reformulation</span>
      </div>

      <p>Many health experts argue that the rise in obesity and diet-related diseases is linked to the overconsumption of
      <input type="text" id="b1"> <span class="feedback"></span> foods. To address this, many
      <input type="text" id="b2"> <span class="feedback"></span> have introduced several
      <input type="text" id="b3"> <span class="feedback"></span>, including tighter rules on how companies can advertise unhealthy products. One important step has been placing a
      <input type="text" id="b4"> <span class="feedback"></span> on junk food
      <input type="text" id="b5"> <span class="feedback"></span>, especially those aimed at children. Other policies include clearer food
      <input type="text" id="b6"> <span class="feedback"></span> and regulations around
      <input type="text" id="b7"> <span class="feedback"></span> design to avoid misleading claims. Financial
      <input type="text" id="b8"> <span class="feedback"></span> have also been suggested to encourage healthier options, along with product
      <input type="text" id="b9"> <span class="feedback"></span> to reduce sugar, salt, and fat levels.</p>

      <div style="margin-top:12px;">
        <button onclick="checkSection2()">Submit Section 2</button>
        <div id="score2" class="score" aria-live="polite"></div>
        <ul id="feedback2" class="feedback-list" aria-live="polite"></ul>
      </div>
    </section>

    <!-- SECTION 3 -->
    <section id="section3" class="question">
      <p><b>3. Which verb does NOT collocate with the noun?</b></p>

      <div class="options" data-word="ultra-processed foods">
        <p><i>ultra-processed foods</i></p>
        <label><input type="radio" name="c1" value="wrong">(over)consume <span class="feedback"></span></label>
        <label><input type="radio" name="c1" value="wrong">manufacture <span class="feedback"></span></label>
        <label><input type="radio" name="c1" value="correct">maintain <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="measures">
        <p><i>measures</i></p>
        <label><input type="radio" name="c2" value="correct">assume <span class="feedback"></span></label>
        <label><input type="radio" name="c2" value="wrong">introduce <span class="feedback"></span></label>
        <label><input type="radio" name="c2" value="wrong">implement <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="misleading marketing">
        <p><i>misleading marketing</i></p>
        <label><input type="radio" name="c3" value="wrong">regulate <span class="feedback"></span></label>
        <label><input type="radio" name="c3" value="correct">approach <span class="feedback"></span></label>
        <label><input type="radio" name="c3" value="wrong">ban <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="a restriction">
        <p><i>a restriction</i></p>
        <label><input type="radio" name="c4" value="wrong">impose <span class="feedback"></span></label>
        <label><input type="radio" name="c4" value="wrong">place __ on <span class="feedback"></span></label>
        <label><input type="radio" name="c4" value="correct">define <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="subsidies">
        <p><i>subsidies</i></p>
        <label><input type="radio" name="c5" value="correct">swallow <span class="feedback"></span></label>
        <label><input type="radio" name="c5" value="wrong">provide <span class="feedback"></span></label>
        <label><input type="radio" name="c5" value="wrong">receive <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="packaging">
        <p><i>packaging</i></p>
        <label><input type="radio" name="c6" value="wrong">design <span class="feedback"></span></label>
        <label><input type="radio" name="c6" value="wrong">recycle <span class="feedback"></span></label>
        <label><input type="radio" name="c6" value="correct">drive <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="labelling">
        <p><i>labelling</i></p>
        <label><input type="radio" name="c7" value="wrong">improve <span class="feedback"></span></label>
        <label><input type="radio" name="c7" value="correct">demonstrate <span class="feedback"></span></label>
        <label><input type="radio" name="c7" value="wrong">require <span class="feedback"></span></label>
      </div>

      <div class="options" data-word="reformulation">
        <p><i>reformulation</i></p>
        <label><input type="radio" name="c8" value="wrong">encourage <span class="feedback"></span></label>
        <label><input type="radio" name="c8" value="wrong">promote <span class="feedback"></span></label>
        <label><input type="radio" name="c8" value="correct">paint <span class="feedback"></span></label>
      </div>

      <div style="margin-top:12px;">
        <button onclick="checkSection3()">Submit Section 3</button>
        <div id="score3" class="score" aria-live="polite"></div>
        <ul id="feedback3" class="feedback-list" aria-live="polite"></ul>
      </div>
    </section>
  </main>

  <script>
    /* Utility: clear feedback spans in a container */
    function clearFeedbackSpans(container) {
      container.querySelectorAll('.feedback').forEach(f => {
        f.textContent = '';
        f.className = 'feedback';
      });
    }

    /* SECTION 1: show tick/cross per selected option and list corrections for wrong/unanswered items */
    function checkSection1() {
      const container = document.getElementById('section1');
      const feedbackList = document.getElementById('feedback1');
      const scoreEl = document.getElementById('score1');
      feedbackList.innerHTML = '';
      scoreEl.textContent = '';

      const items = container.querySelectorAll('.options[data-word]');
      let correctCount = 0;
      const total = items.length;

      items.forEach(div => {
        clearFeedbackSpans(div);
        const word = div.dataset.word;
        const correctInput = div.querySelector('input[value="correct"]');
        const correctText = correctInput ? correctInput.dataset.answer || '' : '';
        const selected = div.querySelector('input:checked');

        if (selected) {
          const fb = selected.parentElement.querySelector('.feedback');
          if (selected.value === 'correct') {
            fb.textContent = '✅';
            fb.className = 'feedback correct';
            correctCount++;
          } else {
            fb.textContent = '❌';
            fb.className = 'feedback incorrect';
            // list correction
            const li = document.createElement('li');
            li.textContent = `${word} → ${correctText}`;
            feedbackList.appendChild(li);
          }
        } else {
          // unanswered -> count as wrong and list correction
          const li = document.createElement('li');
          li.textContent = `${word} → ${correctText}`;
          feedbackList.appendChild(li);
        }
      });

      scoreEl.textContent = `Score: ${correctCount} / ${total}`;
      if (correctCount === total) scoreEl.style.color = 'green';
      else scoreEl.style.color = '';
    }

    /* SECTION 2: word fill blanks */
    function checkSection2() {
      const answers = ["ultra-processed","governments","measures","restriction","marketing","labelling","packaging","subsidies","reformulation"];
      const feedbackList = document.getElementById('feedback2');
      const scoreEl = document.getElementById('score2');
      feedbackList.innerHTML = '';
      scoreEl.textContent = '';

      let correctCount = 0;
      answers.forEach((ans, i) => {
        const input = document.getElementById(`b${i+1}`);
        const fb = input.nextElementSibling;
        fb.textContent = '';
        fb.className = 'feedback';

        const val = (input.value || '').trim().toLowerCase();
        if (val === ans.toLowerCase()) {
          fb.textContent = '✅';
          fb.className = 'feedback correct';
          correctCount++;
        } else {
          fb.textContent = '❌';
          fb.className = 'feedback incorrect';
          const li = document.createElement('li');
          li.textContent = `(${i+1}) ${ans}`;
          feedbackList.appendChild(li);
        }
      });

      scoreEl.textContent = `Score: ${correctCount} / ${answers.length}`;
      if (correctCount === answers.length) scoreEl.style.color = 'green';
      else scoreEl.style.color = '';
    }

    /* Helper: get visible label text for an input (without feedback icons) */
    function getLabelText(label) {
      // prefer the first text-node following the input element
      const childNodes = Array.from(label.childNodes);
      for (let node of childNodes) {
        if (node.nodeType === Node.TEXT_NODE) {
          const t = node.textContent.trim();
          if (t) return t;
        }
      }
      // fallback: full text minus symbols
      return label.textContent.replace(/✅|❌/g,'').trim();
    }

    /* SECTION 3: collocation task */
    function checkSection3() {
      const container = document.getElementById('section3');
      const feedbackList = document.getElementById('feedback3');
      const scoreEl = document.getElementById('score3');
      feedbackList.innerHTML = '';
      scoreEl.textContent = '';

      const items = container.querySelectorAll('.options[data-word]');
      let correctCount = 0;
      const total = items.length;

      items.forEach(div => {
        clearFeedbackSpans(div);
        const word = div.dataset.word;
        const selected = div.querySelector('input:checked');

        if (selected) {
          // if selected.value === 'correct' -> they chose the non-collocating verb (that is the correct test answer)
          if (selected.value === 'correct') {
            const fb = selected.parentElement.querySelector('.feedback');
            fb.textContent = '✅';
            fb.className = 'feedback correct';
            correctCount++;
          } else {
            const fb = selected.parentElement.querySelector('.feedback');
            fb.textContent = '❌';
            fb.className = 'feedback incorrect';
            // build the two collocating verbs (inputs with value="wrong")
            const collInputs = Array.from(div.querySelectorAll('input[value="wrong"]'));
            const collocVerbs = collInputs.map(inp => getLabelText(inp.parentElement));
            const li = document.createElement('li');
            li.textContent = `${word} collocates with ${collocVerbs.join(' and ')}`;
            feedbackList.appendChild(li);
          }
        } else {
          // unanswered -> count as wrong and show collocations
          const collInputs = Array.from(div.querySelectorAll('input[value="wrong"]'));
          const collocVerbs = collInputs.map(inp => getLabelText(inp.parentElement));
          const li = document.createElement('li');
          li.textContent = `${word} collocates with ${collocVerbs.join(' and ')}`;
          feedbackList.appendChild(li);
        }
      });

      scoreEl.textContent = `Score: ${correctCount} / ${total}`;
      if (correctCount === total) scoreEl.style.color = 'green';
      else scoreEl.style.color = '';
    }
  </script>
</body>
</html>